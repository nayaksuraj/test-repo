name: Slack Notification
description: Send rich notifications to Slack with deployment status, build info, and custom messages
repository: https://github.com/nayaksuraj/test-repo

# Pipe metadata
metadata:
  type: notification
  category: messaging
  vendor: nayaksuraj
  version: 1.0.0

# Variables that can be configured
variables:
  - name: SLACK_WEBHOOK_URL
    description: Slack incoming webhook URL
    required: true
    secured: true
    example: "https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXX"

  - name: MESSAGE
    description: Main notification message
    required: false
    default: "✅ Pipeline completed successfully"
    example: "✅ Deployed to production"

  - name: TITLE
    description: Notification title
    required: false
    default: "Bitbucket Pipeline"
    example: "Production Deployment"

  - name: STATUS
    description: Status level (success, warning, error, info)
    required: false
    default: "success"
    example: "success"

  - name: ENVIRONMENT
    description: Deployment environment
    required: false
    example: "production"

  - name: INCLUDE_COMMIT_INFO
    description: Include git commit information in notification
    required: false
    default: "true"
    example: "true"

  - name: INCLUDE_BUILD_INFO
    description: Include build/pipeline information
    required: false
    default: "true"
    example: "true"

  - name: MENTION_USERS
    description: Slack user IDs to mention (comma-separated)
    required: false
    example: "U123456,U789012"

  - name: MENTION_CHANNEL
    description: Mention @channel or @here
    required: false
    example: "channel"

  - name: CUSTOM_FIELDS
    description: Custom fields as JSON key-value pairs
    required: false
    example: '{"Version":"1.2.3","Region":"us-east-1"}'

  - name: THREAD_TS
    description: Thread timestamp to reply to an existing message
    required: false
    example: "1234567890.123456"

  - name: NOTIFICATION_COLOR
    description: Color for the notification attachment (hex or success/warning/danger)
    required: false
    example: "#36a64f"

  - name: DEBUG
    description: Enable debug output
    required: false
    default: "false"
